<!-- ========================================
     HTML STARTS HERE
     File: index.html
     Storm Surge Weather Dashboard - Enhanced
======================================== -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Storm Surge Weather ‚Äî Advanced NEXRAD Level II</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Mapbox GL JS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  
  <!-- Local CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <div id="map"></div>

  <!-- Top Menu Bar -->
  <div class="top-menu-bar">
    <button id="menuBtn" class="menu-btn">‚ò∞</button>
    
    <div class="app-title">
      <h1>Storm Surge Weather</h1>
      <p>NEXRAD Level II ¬∑ Dual-Pol</p>
    </div>

    <div class="top-actions">
      <button id="keyboardBtn" class="icon-btn" title="Keyboard Shortcuts (?)">‚å®Ô∏è</button>
      <button id="feedbackBtn" class="icon-btn" title="Send Feedback">üí¨</button>
    </div>
  </div>

  <!-- Side Menu -->
  <div id="sideMenu" class="side-menu hidden">
    <h3>Settings</h3>
    
    <div class="menu-section">
      <label>Radar Product</label>
      <select id="radarProduct">
        <option value="composite">Composite Reflectivity</option>
        <option value="base">Base Reflectivity</option>
        <option value="velocity">Base Velocity</option>
        <option value="spectrum">Spectrum Width</option>
        <option value="correlation">Correlation Coefficient</option>
        <option value="differential">Differential Reflectivity</option>
        <option value="kdp">Specific Differential Phase</option>
        <option value="precip">One-Hour Precipitation</option>
        <option value="storm-total">Storm Total Precipitation</option>
      </select>
    </div>

    <div class="menu-section">
      <label>Tilt Angle</label>
      <select id="tiltAngle">
        <option value="0.5">0.5¬∞</option>
        <option value="0.9">0.9¬∞</option>
        <option value="1.3">1.3¬∞</option>
        <option value="1.8">1.8¬∞</option>
        <option value="2.4">2.4¬∞</option>
        <option value="3.1">3.1¬∞</option>
        <option value="4.0">4.0¬∞</option>
        <option value="5.1">5.1¬∞</option>
        <option value="6.4">6.4¬∞</option>
        <option value="8.0">8.0¬∞</option>
        <option value="10.0">10.0¬∞</option>
        <option value="12.0">12.0¬∞</option>
        <option value="14.6">14.6¬∞</option>
        <option value="19.5">19.5¬∞</option>
      </select>
    </div>

    <div class="menu-section toggles">
      <label class="toggle-item">
        <span>Lightning</span>
        <input type="checkbox" id="toggleLightning" checked>
      </label>
      <label class="toggle-item">
        <span>Storm Fronts</span>
        <input type="checkbox" id="toggleFronts" checked>
      </label>
      <label class="toggle-item">
        <span>SPC Outlooks</span>
        <input type="checkbox" id="toggleSPC" checked>
      </label>
      <label class="toggle-item">
        <span>MPING Reports</span>
        <input type="checkbox" id="toggleMPING">
      </label>
      <label class="toggle-item">
        <span>TVS Signatures</span>
        <input type="checkbox" id="toggleTVS" checked>
      </label>
      <label class="toggle-item">
        <span>Storm Tracks</span>
        <input type="checkbox" id="toggleStormTracks" checked>
      </label>
      <label class="toggle-item">
        <span>Multi-Panel Display</span>
        <input type="checkbox" id="toggleMultiPanel">
      </label>
      <label class="toggle-item">
        <span>TDWR Radars</span>
        <input type="checkbox" id="toggleTDWR">
      </label>
    </div>

    <div class="menu-section">
      <label>Map Mode</label>
      <div class="button-group">
        <button id="map2D" class="mode-btn">2D</button>
        <button id="map3D" class="mode-btn active">3D</button>
      </div>
    </div>
  </div>

  <!-- Warnings Panel -->
  <div id="warningsPanel" class="warnings-panel">
    <div class="warnings-header">
      <h3>‚ö†Ô∏è Active Warnings (<span id="warningCount">0</span>)</h3>
    </div>
    <div id="warningsList" class="warnings-list">
      <!-- Warnings will be populated by JavaScript -->
    </div>
  </div>

  <!-- Search Bar -->
  <div class="search-container">
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search city, address, or zip code..." />
      <button id="searchBtn">üîç</button>
    </div>
    <div id="searchResults" class="search-results hidden"></div>
  </div>

  <!-- Radar Animation Controls -->
  <div class="radar-animation-controls">
    <div class="animation-header">
      <div class="radar-time-info">
        <span id="radarTime">Loading...</span>
        <span id="radarTimeMode">LIVE</span>
      </div>
    </div>
    
    <div class="animation-controls">
      <button id="playPauseBtn" class="control-btn">‚è∏Ô∏è</button>
      <button id="prevBtn" class="control-btn">‚èÆÔ∏è</button>
      <button id="nextBtn" class="control-btn">‚è≠Ô∏è</button>
      <div class="speed-control">
        <label>Speed:</label>
        <select id="animationSpeed">
          <option value="2000">Slow</option>
          <option value="1000" selected>Normal</option>
          <option value="500">Fast</option>
        </select>
      </div>
    </div>

    <div class="time-slider-container">
      <input type="range" id="timeSlider" min="0" max="11" value="11" step="1">
      <div class="time-labels">
        <span>-60 min</span>
        <span>Now</span>
      </div>
    </div>
  </div>

  <!-- Weather Info Panel -->
  <div id="weatherPanel" class="weather-panel hidden">
    <div class="panel-header">
      <h3 id="locationName">Storm Surge Weather</h3>
      <button id="closePanel" class="close-btn">√ó</button>
    </div>
    
    <div class="panel-content">
      <div class="location-info">
        <div id="locationAddress" class="location-address">Click on map for weather info</div>
        <div id="locationCoords" class="location-coords"></div>
      </div>

      <!-- Active Warnings Section -->
      <div id="warningsSection" class="warnings-section hidden">
        <h4>‚ö†Ô∏è Active Alerts</h4>
        <div id="localWarningsList" class="warnings-list"></div>
      </div>

      <div class="current-weather">
        <div class="temp-display">
          <span id="currentTemp">--¬∞</span>
          <div class="temp-details">
            <div id="feelsLike">Feels like --¬∞</div>
            <div id="conditions">Loading...</div>
            <div id="precipType" class="precip-type"></div>
          </div>
        </div>
      </div>
      
      <div class="weather-details">
        <div class="detail-item">
          <span class="label">Humidity</span>
          <span id="humidity" class="value">--%</span>
        </div>
        <div class="detail-item">
          <span class="label">Wind</span>
          <span id="windSpeed" class="value">-- mph</span>
        </div>
        <div class="detail-item">
          <span class="label">Wind Direction</span>
          <span id="windDirection" class="value">--</span>
        </div>
        <div class="detail-item">
          <span class="label">Pressure</span>
          <span id="pressure" class="value">-- mb</span>
        </div>
        <div class="detail-item">
          <span class="label">Visibility</span>
          <span id="visibility" class="value">-- mi</span>
        </div>
        <div class="detail-item">
          <span class="label">UV Index</span>
          <span id="uvIndex" class="value">--</span>
        </div>
        <div class="detail-item">
          <span class="label">Dew Point</span>
          <span id="dewPoint" class="value">--¬∞</span>
        </div>
        <div class="detail-item">
          <span class="label">Cloud Cover</span>
          <span id="cloudCover" class="value">--%</span>
        </div>
      </div>
      
      <div class="hourly-forecast">
        <h4>24-Hour Forecast</h4>
        <div id="hourlyData" class="hourly-container">
          Loading hourly data...
        </div>
      </div>

      <div class="daily-forecast">
        <h4>7-Day Forecast</h4>
        <div id="dailyData" class="daily-container">
          Loading daily forecast...
        </div>
      </div>
    </div>
  </div>

  <!-- Radar Controls -->
  <div class="radar-controls">
    <div class="control-group">
      <label>Radar:</label>
      <select id="radarTypeQuick">
        <option value="composite">Composite</option>
        <option value="precipitation">Precipitation Type</option>
        <option value="base">Base Reflectivity</option>
        <option value="velocity">Velocity</option>
      </select>
    </div>
    
    <div class="control-group">
      <label>Opacity:</label>
      <input type="range" id="opacitySlider" min="0" max="100" value="55">
      <span id="opacityValue">55%</span>
    </div>

    <div class="control-group">
      <label>
        <input type="checkbox" id="warningsToggle" checked>
        Show Alerts
      </label>
    </div>
  </div>

  <!-- Legend -->
  <div class="radar-legend">
    <div class="legend-title">Precipitation Type</div>
    <div class="legend-scale" id="legendScale">
      <div class="legend-item">
        <div class="legend-color" style="background: #4169E1;"></div>
        <span>Snow</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background: #E6E6FA;"></div>
        <span>Ice/Sleet</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background: #00ff00;"></div>
        <span>Light Rain</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background: #ffff00;"></div>
        <span>Moderate Rain</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background: #ff8000;"></div>
        <span>Heavy Rain</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background: #ff0000;"></div>
        <span>Severe</span>
      </div>
    </div>
  </div>

  <!-- Click Marker -->
  <div id="clickMarker" class="click-marker hidden">üìç</div>

  <!-- Branding -->
  <div class="branding">
    <h1>Storm Surge</h1>
    <p>NEXRAD Level II ¬∑ Dual-Pol</p>
  </div>

  <!-- Data Status Indicator -->
  <div class="data-status">
    <span id="radarStatus">üü¢ Live</span>
    <span id="lastUpdate">Updated: --</span>
  </div>

  <!-- Multi-Panel Container (hidden by default) -->
  <div id="multiPanelContainer" class="multi-panel-container hidden">
    <div class="panel-grid">
      <div class="radar-panel">
        <div class="panel-label">Composite Reflectivity</div>
      </div>
      <div class="radar-panel">
        <div class="panel-label">Base Velocity</div>
      </div>
      <div class="radar-panel">
        <div class="panel-label">Correlation Coefficient</div>
      </div>
      <div class="radar-panel">
        <div class="panel-label">Lightning</div>
      </div>
    </div>
  </div>
</div>

<!-- Warning Details Modal -->
<div id="warningModal" class="modal hidden">
  <div class="modal-content warning-modal">
    <div id="modalHeader" class="modal-header">
      <h2 id="modalTitle">Warning Title</h2>
      <button id="closeModal" class="close-modal-btn">√ó</button>
    </div>
    <div class="modal-body">
      <div class="warning-info-grid">
        <div class="info-row">
          <span class="info-label">Issued:</span>
          <span id="modalIssued" class="info-value">--</span>
        </div>
        <div class="info-row">
          <span class="info-label">Expires:</span>
          <span id="modalExpires" class="info-value">--</span>
        </div>
        <div class="info-row">
          <span class="info-label">Source:</span>
          <span id="modalSource" class="info-value">--</span>
        </div>
      </div>

      <div class="warning-section">
        <h3>Hazards:</h3>
        <div id="modalHazards" class="hazards-list"></div>
      </div>

      <div class="warning-section">
        <h3>Impacts:</h3>
        <p id="modalImpacts">--</p>
      </div>

      <div class="warning-section">
        <h3>Description:</h3>
        <p id="modalDescription">--</p>
      </div>

      <div class="warning-section">
        <h3>Affected Areas:</h3>
        <div id="modalAreas" class="areas-list"></div>
      </div>

      <div class="modal-actions">
        <button id="playAlertBtn" class="action-btn primary">üîä Play Alert</button>
        <button id="shareAlertBtn" class="action-btn secondary">Share</button>
      </div>
    </div>
  </div>
</div>

<!-- Keyboard Shortcuts Modal -->
<div id="keyboardModal" class="modal hidden">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Keyboard Shortcuts</h2>
      <button class="close-modal-btn" onclick="document.getElementById('keyboardModal').classList.add('hidden')">√ó</button>
    </div>
    <div class="modal-body">
      <div class="shortcuts-list">
        <div class="shortcut-item">
          <kbd>Space</kbd>
          <span>Play/Pause Animation</span>
        </div>
        <div class="shortcut-item">
          <kbd>L</kbd>
          <span>Toggle Lightning</span>
        </div>
        <div class="shortcut-item">
          <kbd>F</kbd>
          <span>Toggle Storm Fronts</span>
        </div>
        <div class="shortcut-item">
          <kbd>W</kbd>
          <span>Toggle Warnings</span>
        </div>
        <div class="shortcut-item">
          <kbd>M</kbd>
          <span>Toggle Multi-Panel</span>
        </div>
        <div class="shortcut-item">
          <kbd>2 / 3</kbd>
          <span>Switch 2D/3D View</span>
        </div>
        <div class="shortcut-item">
          <kbd>T</kbd>
          <span>Toggle Storm Tracks</span>
        </div>
        <div class="shortcut-item">
          <kbd>V</kbd>
          <span>Toggle TVS Signatures</span>
        </div>
        <div class="shortcut-item">
          <kbd>‚Üê/‚Üí</kbd>
          <span>Navigate Time Frames</span>
        </div>
        <div class="shortcut-item">
          <kbd>?</kbd>
          <span>Show This Help</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Feedback Modal -->
<div id="feedbackModal" class="modal hidden">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Send Feedback</h2>
      <button class="close-modal-btn" onclick="document.getElementById('feedbackModal').classList.add('hidden')">√ó</button>
    </div>
    <div class="modal-body">
      <textarea id="feedbackText" placeholder="Tell us what you think or report an issue..." rows="6"></textarea>
      <button id="submitFeedback" class="action-btn primary full-width">Submit Feedback</button>
    </div>
  </div>
</div>

<!-- Local JavaScript -->
<script src="script.js"></script>

</body>
</html>
<!-- ======================================== 
     HTML ENDS HERE
======================================== -->